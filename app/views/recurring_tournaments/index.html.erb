<div class="text-center">
  <div id="list-toolbar">
    <h1 class="page-title">Toutes les séries</h1>
    <div id="filters-wrapper" class="text-left">

      <%= form_tag nil, method: :get, id: "index-filters" do %>

        <%= hidden_field_tag :on_abc, params[:on_abc] %>

        <div class="form-row">
          <div class="col-3 offset-1">
            <strong>Niveau</strong>
            <% RecurringTournament::LEVELS.each do |level| %>
              <% id = "level-#{level}" %>
              <div class="custom-control custom-switch">
                <%= check_box_tag 'by_level_in[]',
                                  level,
                                  (params[:by_level_in] || []).include?(level),
                                  class: 'custom-control-input',
                                  id: id %>
                <% color = RecurringTournamentDecorator.level_color(level) %>
                <label class="custom-control-label text-<%= color %>" for="<%= id %>">
                  <%= RecurringTournament.human_attribute_name("level.#{level}") %>
                </label>
              </div>
            <% end %>
          </div>

          <div class="col-3">
            <strong>Type</strong>
            <div class="mb-3">
              <% [false, true, ''].each_with_index do |v, idx| %>
                <div class="custom-control custom-radio">
                  <%= radio_button_tag :by_is_online,
                                      v,
                                      (params[:by_is_online] || '') == v.to_s,
                                      id: "radio-is-online-#{idx}",
                                      class: 'custom-control-input' %>
                  <label class="custom-control-label" for="radio-is-online-<%= idx %>">
                    <%  case v
                        when true %>Online
                    <%  when false %>Offline
                    <%  else %>Les 2
                    <% end %>
                  </label>
                </div>
              <% end %>
            </div>

            <strong>Communautés</strong>
            <div>
              <%= select_tag  :by_closest_community_id,
                              options_for_select(
                                Community.order(:name).map do |community|
                                  [
                                    community.name,
                                    community.id
                                  ]
                                end,
                                params[:by_closest_community_id]
                              ),
                              prompt: 'Toutes',
                              class: 'custom-select custom-select-sm mb-1' %>
            </div>
          </div>

          <div class="col-3 offset-1">
            <strong>Taille</strong>
            <div class="form-row align-items-center mb-3">
              <div class="col-auto">Entre</div>
              <div class="col-auto"><%= select_tag :by_size_geq, options_for_select(planning_size_select_collection, params[:by_size_geq]), class: 'custom-select' %></div>
              <div class="col-auto">et</div>
              <div class="col-auto"><%= select_tag :by_size_leq, options_for_select(planning_size_select_collection, params[:by_size_leq] || RecurringTournament::SIZES.last), class: 'custom-select' %></div>
            </div>

            <strong>Pause</strong>
            <div class="custom-control custom-radio">
              <%= radio_button_tag :by_is_not_archived,
                                    0,
                                    !@not_archived_only,
                                    id: "filter-archived-or-not",
                                    class: 'custom-control-input' %>
              <label class="custom-control-label" for="filter-archived-or-not">
                Voir toutes les séries
              </label>
            </div>
            <div class="custom-control custom-radio">
              <%= radio_button_tag :by_is_not_archived,
                                    1,
                                    @not_archived_only,
                                    id: "filter-not-archived",
                                    class: 'custom-control-input' %>
              <label class="custom-control-label" for="filter-not-archived">
                Masquer les séries en pause
              </label>
            </div>
          </div>
        </div>

      <% end %>
    </div>

    <%= render 'shared/letters' %>
    <%= render 'shared/pagination', collection: @recurring_tournaments %>
  </div>
</div>

<div class="cards-list recurring-tournaments">
  <% @recurring_tournaments.each do |recurring_tournament| %>
    <div class="card-container">
      <%= render 'recurring_tournament', recurring_tournament: recurring_tournament.decorate %>
    </div>
  <% end %>
</div>

<%= render 'shared/pagination', collection: @recurring_tournaments %>
